渲染配置、编译、上传镜像
-----------------------------------------------------------

1. restfulapi2
```log
Render template ../docker-images/job-exporter/npu/Ascend910-smitool-1.5.2-aarch64.run --> ./deploy/docker-images/job-exporter/npu/Ascend910-smitool-1.5.2-aarch64.run
!!! Failure !!! in render template ../docker-images/job-exporter/npu/Ascend910-smitool-1.5.2-aarch64.run
'utf8' codec can't decode byte 0x8b in position 13938: invalid start byte
Render template ../docker-images/job-exporter/npu/lib/libascend_hal.so --> ./deploy/docker-images/job-exporter/npu/lib/libascend_hal.so
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libascend_hal.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
Render template ../docker-images/job-exporter/npu/lib/libmmpa.so --> ./deploy/docker-images/job-exporter/npu/lib/libmmpa.so
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libmmpa.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
Render template ../docker-images/job-exporter/npu/lib/libdrvdsmi_host.so --> ./deploy/docker-images/job-exporter/npu/lib/libdrvdsmi_host.so
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libdrvdsmi_host.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
Render template ../docker-images/job-exporter/npu/lib/libslog.so --> ./deploy/docker-images/job-exporter/npu/lib/libslog.so
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libslog.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
Render template ../docker-images/job-exporter/npu/lib/libc_sec.so --> ./deploy/docker-images/job-exporter/npu/lib/libc_sec.so
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libc_sec.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
Copy tempalte ../docker-images/job-exporter/src/__init__.py --> ./deploy/docker-images/job-exporter/src/__init__.py

...


```
2. webui3
```log
!!! Failure !!! in render template ../docker-images/job-exporter/npu/Ascend910-smitool-1.5.2-aarch64.run
'utf8' codec can't decode byte 0x8b in position 13938: invalid start byte
Render template ../docker-images/job-exporter/npu/lib/libascend_hal.so --> ./deploy/docker-images/job-exporter/npu/lib/libascend_hal.so
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libascend_hal.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
Render template ../docker-images/job-exporter/npu/lib/libmmpa.so --> ./deploy/docker-images/job-exporter/npu/lib/libmmpa.so
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libmmpa.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
Render template ../docker-images/job-exporter/npu/lib/libdrvdsmi_host.so --> ./deploy/docker-images/job-exporter/npu/lib/libdrvdsmi_host.so
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libdrvdsmi_host.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
Render template ../docker-images/job-exporter/npu/lib/libslog.so --> ./deploy/docker-images/job-exporter/npu/lib/libslog.so
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libslog.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
Render template ../docker-images/job-exporter/npu/lib/libc_sec.so --> ./deploy/docker-images/job-exporter/npu/lib/libc_sec.so
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libc_sec.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte

...
Build & push docker images to docker register  ...
Nocache: False

```

3. custom-user-dashboard-frontend
```log
!!! Failure !!! in render template ../docker-images/job-exporter/npu/Ascend910-smitool-1.5.2-aarch64.run
'utf8' codec can't decode byte 0x8b in position 13938: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libascend_hal.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libmmpa.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libdrvdsmi_host.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libslog.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libc_sec.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte

...

Step 6/9 : RUN yarn
 ---> Running in 134a46cccd6d
yarn install v1.22.4
warning package-lock.json found. Your project contains lock files generated by tools other than Yarn. It is advised not to mix package managers in order to avoid resolution inconsistencies caused by unsynchronized lock files. To clear this warning, remove package-lock.json.
[1/5] Validating package.json...
[2/5] Resolving packages...
[3/5] Fetching packages...
warning file-loader@2.0.0: Invalid bin field for "file-loader".
warning umi-url-pnp-loader@1.1.2: Invalid bin field for "umi-url-pnp-loader".
info fsevents@2.1.3: The platform "linux" is incompatible with this module.
info "fsevents@2.1.3" is an optional dependency and failed compatibility check. Excluding it from installation.
info fsevents@1.2.13: The platform "linux" is incompatible with this module.
info "fsevents@1.2.13" is an optional dependency and failed compatibility check. Excluding it from installation.

```

4. custom-user-dashboard-backend

```log
/home/bifeng.peng/DLWorkspace/src/ClusterBootstrap
!!! Failure !!! in render template ../docker-images/job-exporter/npu/Ascend910-smitool-1.5.2-aarch64.run
'utf8' codec can't decode byte 0x8b in position 13938: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libascend_hal.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libmmpa.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libdrvdsmi_host.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libslog.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libc_sec.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
```
5. openresty
```log
Render template ../docker-images/job-exporter/npu/Ascend910-smitool-1.5.2-aarch64.run --> ./deploy/docker-images/job-exporter/npu/Ascend910-smitool-1.5.2-aarch64.run
!!! Failure !!! in render template ../docker-images/job-exporter/npu/Ascend910-smitool-1.5.2-aarch64.run
'utf8' codec can't decode byte 0x8b in position 13938: invalid start byte
Render template ../docker-images/job-exporter/npu/lib/libascend_hal.so --> ./deploy/docker-images/job-exporter/npu/lib/libascend_hal.so
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libascend_hal.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
Render template ../docker-images/job-exporter/npu/lib/libmmpa.so --> ./deploy/docker-images/job-exporter/npu/lib/libmmpa.so
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libmmpa.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
Render template ../docker-images/job-exporter/npu/lib/libdrvdsmi_host.so --> ./deploy/docker-images/job-exporter/npu/lib/libdrvdsmi_host.so
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libdrvdsmi_host.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
Render template ../docker-images/job-exporter/npu/lib/libslog.so --> ./deploy/docker-images/job-exporter/npu/lib/libslog.so
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libslog.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
Render template ../docker-images/job-exporter/npu/lib/libc_sec.so --> ./deploy/docker-images/job-exporter/npu/lib/libc_sec.so
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libc_sec.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte

```

6. init-container
```log
/home/bifeng.peng/DLWorkspace/src/ClusterBootstrap
!!! Failure !!! in render template ../docker-images/job-exporter/npu/Ascend910-smitool-1.5.2-aarch64.run
'utf8' codec can't decode byte 0x8b in position 13938: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libascend_hal.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libmmpa.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libdrvdsmi_host.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libslog.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libc_sec.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte

...

Build & push docker images to docker register  ...
Nocache: False
Prepare to build docker with file: Dockerfile-arm64
Building docker ... atlas_init-container:latest-arm64 .. @./deploy/docker-images/init-container
Execute prebuild.sh for docker atlas_init-container:latest
Error from server (AlreadyExists): serviceaccounts "job" already exists
Error from server (AlreadyExists): roles.rbac.authorization.k8s.io "configmap-admin" already exists
Error from server (AlreadyExists): rolebindings.rbac.authorization.k8s.io "job-configmap-admin" already exists
docker build -f Dockerfile-arm64 -t atlas_init-container:latest-arm64 .
Sending build context to Docker daemon  49.66kB

...

Get:92 http://ports.ubuntu.com/ubuntu-ports bionic/universe arm64 inetutils-traceroute arm64 2:1.9.4-3 [37.1 kB]
debconf: delaying package configuration, since apt-utils is not installed
Fetched 49.8 MB in 18s (2763 kB/s)
```

7. watchdog

```log
!!! Failure !!! in render template ../docker-images/custom-user-dashboard-frontend/.Dockerfile.swp
'utf8' codec can't decode byte 0x9e in position 16: invalid start byte
/home/bifeng.peng/DLWorkspace/src/ClusterBootstrap
!!! Failure !!! in render template ../docker-images/job-exporter/npu/Ascend910-smitool-1.5.2-aarch64.run
'utf8' codec can't decode byte 0x8b in position 13938: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libascend_hal.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libmmpa.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libdrvdsmi_host.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libslog.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libc_sec.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte

```

8. gpu-reporter
```log
!!! Failure !!! in render template ../docker-images/custom-user-dashboard-frontend/.Dockerfile.swp
'utf8' codec can't decode byte 0x9e in position 16: invalid start byte
/home/bifeng.peng/DLWorkspace/src/ClusterBootstrap
!!! Failure !!! in render template ../docker-images/job-exporter/npu/Ascend910-smitool-1.5.2-aarch64.run
'utf8' codec can't decode byte 0x8b in position 13938: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libascend_hal.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libmmpa.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libdrvdsmi_host.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libslog.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libc_sec.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
```

9. job-exporter

```log
!!! Failure !!! in render template ../docker-images/custom-user-dashboard-frontend/.Dockerfile.swp
'utf8' codec can't decode byte 0x9e in position 16: invalid start byte
/home/bifeng.peng/DLWorkspace/src/ClusterBootstrap
!!! Failure !!! in render template ../docker-images/job-exporter/npu/Ascend910-smitool-1.5.2-aarch64.run
'utf8' codec can't decode byte 0x8b in position 13938: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libascend_hal.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libmmpa.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libdrvdsmi_host.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libslog.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libc_sec.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
```
10. repairmanager2

```log
!!! Failure !!! in render template ../docker-images/custom-user-dashboard-frontend/.Dockerfile.swp
'utf8' codec can't decode byte 0x9e in position 16: invalid start byte
/home/bifeng.peng/DLWorkspace/src/ClusterBootstrap
!!! Failure !!! in render template ../docker-images/job-exporter/npu/Ascend910-smitool-1.5.2-aarch64.run
'utf8' codec can't decode byte 0x8b in position 13938: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libascend_hal.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libmmpa.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libdrvdsmi_host.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libslog.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
!!! Failure !!! in render template ../docker-images/job-exporter/npu/lib/libc_sec.so
'utf8' codec can't decode byte 0xb7 in position 18: invalid start byte
```


重启组件
-------------------------------------------------------

* stop过程

1. ./deploy.py --verbose kubernetes stop jobmanager2 restfulapi2 nginx custommetrics repairmanager2 openresty
```log

W0826 20:22:14.204063  121712 helpers.go:535] --dry-run is deprecated and can be replaced with --dry-run=client.
!!! Failure !!! in render template ./services/user-synchronizer/user-synchronizer-cronjob.yaml
'dict object' has no attribute 'activeDirectory'
!!! Failure !!! in render template ./services/user-synchronizer/domain-offset-configmap.yaml
Undefined is not JSON serializable
W0826 20:22:14.631678  121933 helpers.go:535] --dry-run is deprecated and can be replaced with --dry-run=client.
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/jobmanager2/jobmanager2.yaml
daemonset.apps "jobmanager" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/jobmanager2/jobaccount.yaml
serviceaccount "job" deleted
role.rbac.authorization.k8s.io "configmap-admin" deleted
rolebinding.rbac.authorization.k8s.io "job-configmap-admin" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/jobmanager2/dlws-scripts.yaml
configmap "dlws-scripts" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/jobmanager2/jobmanager2-arm64.yaml
daemonset.apps "jobmanager-arm64" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/jobmanager2/jobmanager2-arm64.yaml
Error from server (NotFound): error when deleting "./deploy/services/jobmanager2/jobmanager2-arm64.yaml": daemonsets.apps "jobmanager-arm64" not found
from console
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/restfulapi2/restfulapi2.yaml
daemonset.apps "restfulapi" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/restfulapi2/restfulapi2-arm64.yaml
daemonset.apps "restfulapi-arm64" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/restfulapi2/restfulapi2-arm64.yaml
Error from server (NotFound): error when deleting "./deploy/services/restfulapi2/restfulapi2-arm64.yaml": daemonsets.apps "restfulapi-arm64" not found
from console
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/nginx/nginx.yaml
daemonset.apps "nginx" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/nginx/nginx-arm64.yaml
daemonset.apps "nginx-arm64" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/nginx/nginx-arm64.yaml
Error from server (NotFound): error when deleting "./deploy/services/nginx/nginx-arm64.yaml": daemonsets.apps "nginx-arm64" not found

...

daemonset.apps "repairmanager2-arm64" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/repairmanager2/repairmanager2-arm64.yaml
Error from server (NotFound): error when deleting "./deploy/services/repairmanager2/repairmanager2-arm64.yaml": daemonsets.apps "repairmanager2-arm64" not found
from console
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/openresty/openresty.yaml
daemonset.apps "openresty" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/openresty/openresty-arm64.yaml
daemonset.apps "openresty-arm64" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/openresty/openresty-arm64.yaml
Error from server (NotFound): error when deleting "./deploy/services/openresty/openresty-arm64.yaml": daemonsets.apps "openresty-arm64" not found

```


2.  ./deploy.py --verbose kubernetes stop monitor

```log
!!! Failure !!! in render template ./services/user-synchronizer/user-synchronizer-cronjob.yaml
'dict object' has no attribute 'activeDirectory'
!!! Failure !!! in render template ./services/user-synchronizer/domain-offset-configmap.yaml
Undefined is not JSON serializable
W0826 20:23:57.189391  141851 helpers.go:535] --dry-run is deprecated and can be replaced with --dry-run=client.
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/monitor/alert-manager.yaml
configmap "alert-manager" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/monitor/alert-templates.yaml
configmap "alert-templates" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/monitor/grafana.yaml
deployment.apps "grafana" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/monitor/grafana-config.yaml
configmap "grafana-configuration" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/monitor/prometheus.yaml
configmap "prometheus-configmap" deleted
deployment.apps "prometheus-deployment" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/monitor/prometheus-alerting.yaml
configmap "prometheus-alert" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/monitor/watchdog.yaml
deployment.apps "watchdog" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/monitor/job-exporter.yaml
daemonset.apps "job-exporter" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/monitor/node-exporter.yaml
daemonset.apps "node-exporter" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/monitor/grafana-arm64.yaml
deployment.apps "grafana-arm64" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/monitor/prometheus-arm64.yaml
deployment.apps "prometheus-deployment-arm64" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/monitor/watchdog-arm64.yaml
deployment.apps "watchdog-arm64" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/monitor/job-exporter-arm64.yaml
daemonset.apps "job-exporter-arm64" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/monitor/grafana-arm64.yaml
Error from server (NotFound): error when deleting "./deploy/services/monitor/grafana-arm64.yaml": deployments.apps "grafana-arm64" not found
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/monitor/prometheus-arm64.yaml
Error from server (NotFound): error when deleting "./deploy/services/monitor/prometheus-arm64.yaml": deployments.apps "prometheus-deployment-arm64" not found
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/monitor/watchdog-arm64.yaml
Error from server (NotFound): error when deleting "./deploy/services/monitor/watchdog-arm64.yaml": deployments.apps "watchdog-arm64" not found
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/monitor/job-exporter-arm64.yaml
Error from server (NotFound): error when deleting "./deploy/services/monitor/job-exporter-arm64.yaml": daemonsets.apps "job-exporter-arm64" not found
```

3. ./deploy.py --verbose kubernetes stop/start webui3

```log

!!! Failure !!! in render template ./services/user-synchronizer/user-synchronizer-cronjob.yaml
'dict object' has no attribute 'activeDirectory'
!!! Failure !!! in render template ./services/user-synchronizer/domain-offset-configmap.yaml
Undefined is not JSON serializable
W0826 20:24:58.909258  146182 helpers.go:535] --dry-run is deprecated and can be replaced with --dry-run=client.
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/webui3/webui3.yaml
daemonset.apps "webui3" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/webui3/webui3-arm64.yaml
daemonset.apps "webui3-arm64" deleted
kubectl --kubeconfig=./deploy/sshkey/admin.conf delete -f ./deploy/services/webui3/webui3-arm64.yaml
Error from server (NotFound): error when deleting "./deploy/services/webui3/webui3-arm64.yaml": daemonsets.apps "webui3-arm64" not found

```

4. ./deploy.py kubernetes stop/start custom-user-dashboard

```log

W0826 20:26:07.658938  150357 helpers.go:535] --dry-run is deprecated and can be replaced with --dry-run=client.
!!! Failure !!! in render template ./services/user-synchronizer/user-synchronizer-cronjob.yaml
'dict object' has no attribute 'activeDirectory'
!!! Failure !!! in render template ./services/user-synchronizer/domain-offset-configmap.yaml
```

* start 过程

1.  ./deploy.py --verbose kubernetes start jobmanager2 restfulapi2 nginx custommetrics repairmanager2 openresty

```log
Error from server (AlreadyExists): error when creating "./deploy/services/jobmanager2/jobmanager2-arm64.yaml": daemonsets.apps "jobmanager-arm64" already exists

Error from server (AlreadyExists): error when creating "./deploy/services/restfulapi2/restfulapi2-arm64.yaml": daemonsets.apps "restfulapi-arm64" already exists

Error from server (AlreadyExists): error when creating "./deploy/services/nginx/nginx-arm64.yaml": daemonsets.apps "nginx-arm64" already exists

Error from server (AlreadyExists): error when creating "./deploy/services/repairmanager2/repairmanager2-arm64.yaml": daemonsets.apps "repairmanager2-arm64" already exists

Error from server (AlreadyExists): error when creating "./deploy/services/openresty/openresty-arm64.yaml": daemonsets.apps "openresty-arm64" already exists
```
2. ./deploy.py --verbose kubernetes start monitor

```log
Error from server (AlreadyExists): error when creating "./deploy/services/monitor/job-exporter-arm64.yaml": daemonsets.apps "job-exporter-arm64" already exists

Error from server (AlreadyExists): error when creating "./deploy/services/monitor/watchdog-arm64.yaml": deployments.apps "watchdog-arm64" already exists

Error from server (AlreadyExists): error when creating "./deploy/services/monitor/prometheus-arm64.yaml": deployments.apps "prometheus-deployment-arm64" already exists

ostNetwork': True, 'hostPID': False, 'nodeSelector': {'archType': 'arm64', 'grafana': 'active'}}, 'metadata': {'labels': {'app': 'grafana', 'task': 'monitoring'}}}, 'selector': {'matchLabels': {'app': 'grafana'}}}, 'apiVersion': 'apps/v1', 'metadata': {'namespace': 'kube-system', 

Error from server (AlreadyExists): error when creating "./deploy/services/monitor/grafana-arm64.yaml": deployments.apps "grafana-arm64" already exists

```
3. webui3
```log

!!! Failure !!! in render template ./services/user-synchronizer/user-synchronizer-cronjob.yaml
'dict object' has no attribute 'activeDirectory'
!!! Failure !!! in render template ./services/user-synchronizer/domain-offset-configmap.yaml
Undefined is not JSON serializable
W0826 20:39:09.275008  144042 helpers.go:535] --dry-run is deprecated and can be replaced with --dry-run=client.
Start service:
{'kind': 'DaemonSet', 'spec': {'template': {'spec': {'tolerations': [{'operator': 'Exists', 'key': 'CriticalAddonsOnly'}, {'effect': 'NoSchedule', 'key': 'node-role.kubernetes.io/master'}], 'hostNetwork': True, 'containers': [{'image': 'apulistech/atlas_webui3:latest', 'imagePullPolicy': 'Always', 'volumeMounts': [{'mountPath': '/WebUI', 'name': 'webuiconfig'}, {'mountPath': '/usr/src/app/config', 'name': 'nodejsconfig'}, {'mountPath': '/var/log/webui3', 'name': 'webuilog'}], 'ports': [{'name': 'webui3', 'containerPort': 3081}], 'name': 'webui3'}], 'volumes': [{'hostPath': {'path': '/etc/WebUI'}, 'name': 'webuiconfig'}, {'hostPath': {'path': '/var/log/webui3'}, 'name': 'webuilog'}, {'hostPath': {'path': '/etc/WebUI'}, 'name': 'nodejsconfig'}], 'nodeSelector': {'archType': 'amd64', 'webportal': 'active'}}, 'metadata': {'labels': {'app': 'webui3', 'webportal-node': 'pod'}, 'name': 'webui3'}}, 'selector': {'matchLabels': {'webportal-node': 'pod'}}}, 'apiVersion': 'apps/v1', 'metadata': {'namespace': 'default', 'name': 'webui3'}}
kubectl --kubeconfig=./deploy/sshkey/admin.conf create -f ./deploy/services/webui3/webui3.yaml
daemonset.apps/webui3 created
Start service:
{'kind': 'DaemonSet', 'spec': {'template': {'spec': {'tolerations': [{'operator': 'Exists', 'key': 'CriticalAddonsOnly'}, {'effect': 'NoSchedule', 'key': 'node-role.kubernetes.io/master'}], 'hostNetwork': True, 'containers': [{'image': 'apulistech/atlas_webui3:latest-arm64', 'imagePullPolicy': 'Always', 'volumeMounts': [{'mountPath': '/WebUI', 'name': 'webuiconfig'}, {'mountPath': '/usr/src/app/config', 'name': 'nodejsconfig'}, {'mountPath': '/var/log/webui3', 'name': 'webuilog'}], 'ports': [{'containerPort': 3081, 'name': 'webui3', 'hostPort': 3081}], 'name': 'webui3'}], 'volumes': [{'hostPath': {'path': '/etc/WebUI'}, 'name': 'webuiconfig'}, {'hostPath': {'path': '/var/log/webui3'}, 'name': 'webuilog'}, {'hostPath': {'path': '/etc/WebUI'}, 'name': 'nodejsconfig'}], 'nodeSelector': {'archType': 'arm64', 'webportal': 'active'}}, 'metadata': {'labels': {'app': 'webui3', 'webportal-node': 'pod'}, 'name': 'webui3'}}, 'selector': {'matchLabels': {'webportal-node': 'pod'}}}, 'apiVersion': 'apps/v1', 'metadata': {'namespace': 'default', 'name': 'webui3-arm64'}}
kubectl --kubeconfig=./deploy/sshkey/admin.conf create -f ./deploy/services/webui3/webui3-arm64.yaml
daemonset.apps/webui3-arm64 created
Start service:
{'kind': 'DaemonSet', 'spec': {'template': {'spec': {'tolerations': [{'operator': 'Exists', 'key': 'CriticalAddonsOnly'}, {'effect': 'NoSchedule', 'key': 'node-role.kubernetes.io/master'}], 'hostNetwork': True, 'containers': [{'image': 'apulistech/atlas_webui3:latest-arm64', 'imagePullPolicy': 'Always', 'volumeMounts': [{'mountPath': '/WebUI', 'name': 'webuiconfig'}, {'mountPath': '/usr/src/app/config', 'name': 'nodejsconfig'}, {'mountPath': '/var/log/webui3', 'name': 'webuilog'}], 'ports': [{'containerPort': 3081, 'name': 'webui3', 'hostPort': 3081}], 'name': 'webui3'}], 'volumes': [{'hostPath': {'path': '/etc/WebUI'}, 'name': 'webuiconfig'}, {'hostPath': {'path': '/var/log/webui3'}, 'name': 'webuilog'}, {'hostPath': {'path': '/etc/WebUI'}, 'name': 'nodejsconfig'}], 'nodeSelector': {'archType': 'arm64', 'webportal': 'active'}}, 'metadata': {'labels': {'app': 'webui3', 'webportal-node': 'pod'}, 'name': 'webui3'}}, 'selector': {'matchLabels': {'webportal-node': 'pod'}}}, 'apiVersion': 'apps/v1', 'metadata': {'namespace': 'default', 'name': 'webui3-arm64'}}
kubectl --kubeconfig=./deploy/sshkey/admin.conf create -f ./deploy/services/webui3/webui3-arm64.yaml
Error from server (AlreadyExists): error when creating "./deploy/services/webui3/webui3-arm64.yaml": daemonsets.apps "webui3-arm64" already exists
```

4. custom-user-dashboard
```log

W0826 20:39:57.882027  159725 helpers.go:535] --dry-run is deprecated and can be replaced with --dry-run=client.
!!! Failure !!! in render template ./services/user-synchronizer/user-synchronizer-cronjob.yaml
'dict object' has no attribute 'activeDirectory'
!!! Failure !!! in render template ./services/user-synchronizer/domain-offset-configmap.yaml
Undefined is not JSON serializable

```